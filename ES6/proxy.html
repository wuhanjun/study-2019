<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <script>
//       var pipe = (function () {
//         return function(value) {
//           var funcStack = []
//           var oproxy = new Proxy(
//             {},
//             {
//               get: function (pipeObject, fnName) {
//                 if (fnName === "get") {
//                   return funcStack.reduce(function(val, fn) {
//                     return fn(val)
//                   }, value)
//                 }
//                 funcStack.push(window[fnName])
//                 return oproxy
//               }
//             }
//           )

//           return oproxy
//         }
//       })()

//       var double = n => n * 2
//       var pow = n => n * n
//       var reverseInt = n =>
//         n
//           .toString()
//           .split("")
//           .reverse()
//           .join("") | 0

//       pipe(3).double.pow.reverseInt.get


//       const dom = new Proxy({}, {
//         get(target, property) {
//           return function(attrs = {}, ...children) {
//             const el = document.createElement(property);
//             for (let prop of Object.keys(attrs)) {
//               el.setAttribute(prop, attrs[prop]);
//             }
//             for (let child of children) {
//               if (typeof child === 'string') {
//                 child = document.createTextNode(child);
//               }
//               el.appendChild(child);
//             }
//             return el;
//           }
//         }
//       });

//       const el = dom.div({},
//         'Hello, my name is ',
//         dom.a({href: '//example.com'}, 'Mark'),
//         '. I like:',
//         dom.ul({},
//           dom.li({}, 'The web'),
//           dom.li({}, 'Food'),
//           dom.li({}, '…actually that\'s it')
//         )
//       );

// document.body.appendChild(el);

// var validator = {
//   set: function(obj, prop, value, receiver) {
//     console.log(obj === a)
//     console.log(receiver === person)
//     obj[prop] = value;
//   }
// }
// var a = {}

// var person = new Proxy(a, validator)
// person.aaa = 1

// 'use strict';
const handler = {
  set: function(obj, prop, value, receiver) {
    obj[prop] = value;
    // 无论有没有下面这一行，都会报错
    // return false;
  }
};
let obj = {}
const proxy = new Proxy(obj, handler);
proxy.foo = 'bar';
    </script>
  </body>
</html>
